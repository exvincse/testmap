<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
  </head>
  <style>
    html, body{
        width: 100%;
        height: 100%;
    }
    #map{
        width: 100%;
        height: 100%;
    }
</style>
  <body>
    <div id="map"></div>
    <script>
        // function makeRequest(){
        //     xhr = new XMLHttpRequest();
        //     xhr.open( 'POST','https://www.googleapis.com/geolocation/v1/geolocate?key=');
        //     xhr.onload = function(){
        //         // do something
        //         var response = JSON.parse(this.responseText);
        //         console.log(response)
        //     }
        //     xhr.send();
        // }

        // makeRequest();


        // let lat = 0;
        // let lon = 0; 
        // // 先確認使用者裝置能不能抓地點
        // if(navigator.geolocation) {

        //     // 使用者不提供權限，或是發生其它錯誤
        //     function error() {
        //         alert('無法取得你的位置');
        //     }

        //     // 使用者允許抓目前位置，回傳經緯度
        //     function success(position) {
        //         lat = position.coords.latitude;
        //         lon = position.coords.longitude
        //         console.log(lat, lon, 25.0231341,121.4114551)
        //     }

        //     // 跟使用者拿所在位置的權限
        //     navigator.geolocation.getCurrentPosition(success, error);

        // } else {
        //     alert('Sorry, 你的裝置不支援地理位置功能。')
        // }

        // var map;
        // function initMap(){
        //     if (lat === 0 && lon === 0) return false;
        //     map = new google.maps.Map(document.getElementById('map'), {
        //         center: {lat: lat, lng: lon},
        //         zoom: 18,
        //     });
        // }
    </script>
    <!-- <script src="https://maps.googleapis.com/maps/api/js?key=''&callback=initMap" async defer></script> -->
    <!-- 
  function initMap() {
  const map = new google.maps.Map(document.getElementById("map"), {
    zoom: 8,
    center: { lat: 40.731, lng: -73.997 },
  });
  const geocoder = new google.maps.Geocoder();
  const infowindow = new google.maps.InfoWindow();
  document.getElementById("submit").addEventListener("click", () => {
    geocodeLatLng(geocoder, map, infowindow);
  });
}

function geocodeLatLng(geocoder, map, infowindow) {
  const input = document.getElementById("latlng").value;
  const latlngStr = input.split(",", 2);
  const latlng = {
    lat: parseFloat(latlngStr[0]),
    lng: parseFloat(latlngStr[1]),
  };
  geocoder
    .geocode({ location: latlng })
    .then((response) => {
      if (response.results[0]) {
        map.setZoom(11);
        const marker = new google.maps.Marker({
          position: latlng,
          map: map,
        });
        infowindow.setContent(response.results[0].formatted_address);
        infowindow.open(map, marker);
        console.log(response.results[0])
      } else {
        window.alert("No results found");
      }
    })
    .catch((e) => window.alert("Geocoder failed due to: " + e));
}
 -->
  </body>
</html>